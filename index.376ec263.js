var t,n={next:function(t){const n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=new Array(t[e].length);for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++){let i=0;for(let n=-1;n<=1;n++)for(let r=-1;r<=1;r++)0===n&&0===r||void 0===t[e+n]||void 0===t[e+n][o+r]||!t[e+n][o+r]||i++;n[e][o]=t[e][o]&&2===i||3===i}return n}}.next;function e(t,n,e=((t,n)=>!1)){const o=[];for(let i=0;i<n;i++){const n=[];for(let o=0;o<t;o++)n.push(e(i,o));o.push(n)}return o}function o(t){const n=[];return t.split(",").forEach((t=>{if(t){const e=[];t.split("-").forEach((t=>{if(t){const[,n,o]=t.split(/([0-9]+)/);for(let t=0;t<n;t++)e.push("l"===o)}})),n.push(e)}})),n}function i(t){let n=-2;for(let e=0;e<t.length&&!t[e].some((t=>t));e++)n++;return t.filter(((t,e)=>e>=n))}function r(t){return n=>{for(let e=0;e<t;e++)n=[...n,Array.from({length:n[0].length},(()=>!1))];return n}}function c(t,...n){return n.forEach((n=>{t=n(t)})),t}function l(t){return t[0].map(((n,e)=>t.map((t=>t[e]))))}function a(t){return t.map(((n,e)=>t[t.length-1-e]))}function u(t,n){return t.filter(((t,e)=>e<n))}var s=(t={random:function(t,n,o=.25){const i=.8;return e(t,n,((e,r)=>e/n>1-i&&e/n<i&&r/t>1-i&&r/t<i&&Math.random()<o))},create:e,getPopulation:function(t){let n=0;for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)t[e][o]&&n++;return n},encode:function(t){let n="";for(let e=0;e<t.length;e++){let o,i="",r=0;for(let n=0;n<t[e].length;n++){const c=t[e][n];o!==c&&(void 0!==o&&(i+=r+(o?"l":"d")+"-"),o=c,r=0),r++,n===t[e].length-1&&(i+=r+++(o?"l":"d")+"-")}n+=i+","}return n},decode:o,dim:function(t){const n=o(t);return{rows:n.length,cols:n[0].length}},pad:function(t,n,e){return c(t,r(e/2),a,r(e/2),a,l,r(n/2),a,r(n/2),a,l)},trim:function(t){return c(t,i,a,i,a,l,i,a,i,a,l)},sliceBounds:function(t,n,e){return c(t,(t=>u(t,e)),l,(t=>u(t,n)),l)},compose:c,mirror:a,append:r,transpose:l}).random,d=t.create,f=t.getPopulation,h=t.encode,g=t.decode,m=t.pad;const w=(()=>{let t;return{render:function(n,e,o){const i=n.getContext("2d");for(let n=0;n<e.length;n++)for(let r=0;r<e[n].length;r++){const c=e[n][r];t&&c===t[n][r]||(i.beginPath(),i.strokeStyle="#555555",i.fillStyle=c?"#ffffff":"#000000",i.lineWidth=1,i.rect(r*o,n*o,o,o),i.fill(),i.stroke())}t=e},resizeCanvasToDisplaySize:function(t){const n=t.clientWidth,e=t.clientHeight;return(t.width!==n||t.height!==e)&&(t.width=n,t.height=e,!0)},requestAnimationFrame:function(t,n){let e;window.requestAnimationFrame((function o(i){void 0===e&&(e=i),i-e>n()&&(e=i,t()),window.requestAnimationFrame(o)}))}}})();(()=>{const t=document.getElementById("generations-count"),e=document.getElementById("population-count"),o=document.getElementById("start"),i=document.getElementById("clear"),r=document.getElementById("reset"),c=document.getElementById("random"),l=document.getElementById("speed"),a=document.getElementById("speed-value"),u=document.querySelector("canvas"),p={P:F,C:R,R:U,O:H};let y,v,E,P,x,L,M,I,C=!1,k=0,B=!1;function W(t){const n=t(v);void 0!==n&&(console.log(h(n)),v=n,w.render(u,v,y),e.textContent=String(f(v)))}function A(t,n,e){if(t)return Math.ceil(Math.min(window.innerHeight/+e,window.innerWidth/+n));return"lg"===new URL(window.location.href).searchParams.get("size")?Math.max(50,Math.max(window.innerHeight/50,window.innerWidth/50)):20}function S(t){q(Math.pow(t.target.value,2))}function q(t){L=1/t,a.textContent=t.toFixed(2),l.value=Math.pow(t,.5)}function z(t){if(!t.ctrlKey&&!t.metaKey){const n=p[t.key.toUpperCase()];n&&n()}}function F(){D(!C)}function H(){b(),W((()=>E))}function R(){D(!1),b(),W((()=>d(P,x)))}function U(){b(),W((()=>s(P,x)))}function b(){k=0,t.textContent="0"}function D(t){C=t,o.textContent=C?"Pause (P)":"Play (P)"}function K(t){if(1===t.buttons){B=!0,I=C,D(!1);const{col:n,row:e}=X(t);M=!v[e][n],W((t=>Y(t,e,n)))}}function T(t){if(B){const{col:n,row:e}=X(t);W((t=>Y(t,e,n)))}}function O(t){if(B){const{col:n,row:e}=X(t);W((t=>Y(t,e,n))),B=!1,I&&D(!0)}}function X(t){return{col:Math.floor(t.clientX/y),row:Math.floor(t.clientY/y)}}function Y(t,n,e){if(t[n][e]===M)return;const o=t.map((t=>[...t]));return o[n][e]=M,o}return{init:function(){o.addEventListener("click",F),i.addEventListener("click",R),r.addEventListener("click",H),c.addEventListener("click",U),l.addEventListener("change",S),document.addEventListener("keydown",z),u.addEventListener("mousedown",K),u.addEventListener("mousemove",T),u.addEventListener("mouseup",O),w.resizeCanvasToDisplaySize(u),function(){const t=new URL(window.location.href);q(+t.searchParams.get("speed")||1)}(),function(){const t=new URL(window.location.href);"false"===t.searchParams.get("random")&&(c.style.display="none");"false"===t.searchParams.get("clear")&&(i.style.display="none");"true"===t.searchParams.get("reset")&&(r.style.display="block")}();const{grid:e,cellWidthInPixels:a}=function(){const t=new URL(window.location.href).searchParams.get("init");if(t){const n=g(t),e=n.length,o=n[0]?n[0].length:0,i=A(!0,o,e),r=Math.ceil((window.innerWidth-i*o)/i),c=Math.ceil((window.innerHeight-i*e)/i);return{grid:m(n,r,c),cellWidthInPixels:i}}{const t=A(!1);return{grid:d(Math.ceil(window.innerWidth/t),Math.ceil(window.innerHeight/t)),cellWidthInPixels:t}}}();y=a,E=e,x=e.length,P=e[0].length,W((()=>e)),w.requestAnimationFrame((()=>{C&&(t.textContent=String(k++),W((t=>n(t))))}),(()=>1e3*L))}}})().init();
//# sourceMappingURL=index.376ec263.js.map
