var t,e={next:function(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=new Array(t[n].length);for(let n=0;n<t.length;n++)for(let o=0;o<t[n].length;o++){let r=0;for(let e=-1;e<=1;e++)for(let i=-1;i<=1;i++)0===e&&0===i||void 0===t[n+e]||void 0===t[n+e][o+i]||!t[n+e][o+i]||r++;e[n][o]=t[n][o]&&2===r||3===r}return e}}.next;function n(t,e,n=((t,e)=>!1)){const o=[];for(let r=0;r<e;r++){const e=[];for(let o=0;o<t;o++)e.push(n(r,o));o.push(e)}return o}function o(t){const e=[];return t.split(",").forEach((t=>{if(t){const n=[];t.split("-").forEach((t=>{if(t){const[,e,o]=t.split(/([0-9]+)/);for(let t=0;t<e;t++)n.push("l"===o)}})),e.push(n)}})),e}function r(t){let e=-2;for(let n=0;n<t.length&&!t[n].some((t=>t));n++)e++;return t.filter(((t,n)=>n>=e))}function i(t){return e=>{for(let n=0;n<t;n++)e=[...e,Array.from({length:e[0].length},(()=>!1))];return e}}function c(t,...e){return e.forEach((e=>{t=e(t)})),t}function l(t){return t[0].map(((e,n)=>t.map((t=>t[n]))))}function u(t){return t.map(((e,n)=>t[t.length-1-n]))}function a(t,e){return t.filter(((t,n)=>n<e))}var s=(t={random:function(t,e,o=.25){const r=.8;return n(t,e,((n,i)=>n/e>1-r&&n/e<r&&i/t>1-r&&i/t<r&&Math.random()<o))},create:n,getPopulation:function(t){let e=0;for(let n=0;n<t.length;n++)for(let o=0;o<t[n].length;o++)t[n][o]&&e++;return e},encode:function(t){let e="";for(let n=0;n<t.length;n++){let o,r="",i=0;for(let e=0;e<t[n].length;e++){const c=t[n][e];o!==c&&(void 0!==o&&(r+=i+(o?"l":"d")+"-"),o=c,i=0),i++,e===t[n].length-1&&(r+=i+++(o?"l":"d")+"-")}e+=r+","}return e},decode:o,dim:function(t){const e=o(t);return{rows:e.length,cols:e[0].length}},pad:function(t,e,n){return c(t,i(n/2),u,i(n/2),u,l,i(e/2),u,i(e/2),u,l)},trim:function(t){return c(t,r,u,r,u,l,r,u,r,u,l)},sliceBounds:function(t,e,n){return c(t,(t=>a(t,n)),l,(t=>a(t,e)),l)},compose:c,mirror:u,append:i,transpose:l}).random,d=t.create,f=t.getPopulation,h=t.decode,g=t.pad;const m=(()=>{let t;return{render:function(e,n,o){const r=e.getContext("2d");for(let e=0;e<n.length;e++)for(let i=0;i<n[e].length;i++){const c=n[e][i];t&&c===t[e][i]||(r.beginPath(),r.strokeStyle="#bbbbbb",r.fillStyle=c?"#000000":"#ffffff",r.lineWidth=1,r.rect(i*o,e*o,o,o),r.fill(),r.stroke())}t=n},resizeCanvasToDisplaySize:function(t){const e=t.clientWidth,n=t.clientHeight;return(t.width!==e||t.height!==n)&&(t.width=e,t.height=n,!0)},requestAnimationFrame:function(t,e){let n;window.requestAnimationFrame((function o(r){void 0===n&&(n=r),r-n>e()&&(n=r,t()),window.requestAnimationFrame(o)}))}}})();(()=>{const t=document.getElementById("generations-count"),n=document.getElementById("population-count"),o=document.getElementById("start"),r=document.getElementById("clear"),i=document.getElementById("reset"),c=document.getElementById("random"),l=document.getElementById("speed"),u=document.getElementById("speed-value"),a=document.querySelector("canvas"),w={P:S,C:z,R:F,O:q};let p,v,y,E,P,L,x,M,I=!1,C=0,b=!1;function k(t){const e=t(v);void 0!==e&&(v=e,m.render(a,v,p),n.textContent=String(f(v)))}function B(t,e,n){if(t)return Math.ceil(Math.min(window.innerHeight/+n,window.innerWidth/+e));return"lg"===new URL(window.location.href).searchParams.get("size")?Math.max(50,Math.max(window.innerHeight/50,window.innerWidth/50)):20}function W(t){D(Math.pow(t.target.value,2))}function D(t){L=1/t,u.textContent=t.toFixed(2),l.value=Math.pow(t,.5)}function A(t){if(!t.ctrlKey&&!t.metaKey){const e=w[t.key.toUpperCase()];e&&e()}}function S(){R(!I)}function q(){H(),k((()=>y))}function z(){R(!1),H(),k((()=>d(E,P)))}function F(){H(),k((()=>s(E,P)))}function H(){C=0,t.textContent="0"}function R(t){I=t,o.textContent=I?"Pause (P)":"Play (P)"}function U(t){t.preventDefault(),1===t.buttons&&T(t)}function K(t){t.preventDefault(),T(t.touches[0])}function T(t){b=!0,M=I,R(!1);const{col:e,row:n}=J(t);x=!v[n][e],k((t=>N(t,n,e)))}function O(t){t.preventDefault(),Y(t)}function X(t){t.preventDefault(),Y(t.touches[0])}function Y(t){if(b){const{col:e,row:n}=J(t);k((t=>N(t,n,e)))}}function j(t){if(t.preventDefault(),b){const{col:e,row:n}=J(t);k((t=>N(t,n,e))),b=!1,M&&R(!0)}}function G(t){t.preventDefault(),b&&M&&R(!0)}function J(t){return{col:Math.floor(t.clientX/p),row:Math.floor(t.clientY/p)}}function N(t,e,n){if(t[e][n]===x)return;const o=t.map((t=>[...t]));return o[e][n]=x,o}return{init:function(){o.addEventListener("click",S),r.addEventListener("click",z),i.addEventListener("click",q),c.addEventListener("click",F),l.addEventListener("change",W),document.addEventListener("keydown",A),a.addEventListener("mousedown",U),a.addEventListener("mousemove",O),a.addEventListener("mouseup",j),a.addEventListener("touchstart",K),a.addEventListener("touchmove",X),a.addEventListener("touchend",G),m.resizeCanvasToDisplaySize(a),function(){const t=new URL(window.location.href);D(+t.searchParams.get("speed")||20)}(),function(){const t=new URL(window.location.href);"false"===t.searchParams.get("random")&&(c.style.display="none");"false"===t.searchParams.get("clear")&&(r.style.display="none");"true"===t.searchParams.get("reset")&&(i.style.display="block")}();const{grid:n,cellWidthInPixels:u}=function(){const t=new URL(window.location.href).searchParams.get("init");if(t){const e=h(t),n=e.length,o=e[0]?e[0].length:0,r=B(!0,o,n),i=Math.ceil((window.innerWidth-r*o)/r),c=Math.ceil((window.innerHeight-r*n)/r);return{grid:g(e,i,c),cellWidthInPixels:r}}{const t=B(!1);return{grid:d(Math.ceil(window.innerWidth/t),Math.ceil(window.innerHeight/t)),cellWidthInPixels:t}}}();p=u,y=n,P=n.length,E=n[0].length,k((()=>n)),m.requestAnimationFrame((()=>{I&&(t.textContent=String(C++),k((t=>e(t))))}),(()=>1e3*L))}}})().init();
//# sourceMappingURL=index.fffd4cf9.js.map
