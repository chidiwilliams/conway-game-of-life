var t,n={next:function(t){const n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=new Array(t[e].length);for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++){let i=0;for(let n=-1;n<=1;n++)for(let r=-1;r<=1;r++)0===n&&0===r||void 0===t[e+n]||void 0===t[e+n][o+r]||!t[e+n][o+r]||i++;n[e][o]=t[e][o]&&2===i||3===i}return n}}.next;function e(t,n,e=((t,n)=>!1)){const o=[];for(let i=0;i<n;i++){const n=[];for(let o=0;o<t;o++)n.push(e(i,o));o.push(n)}return o}function o(t){const n=[];return t.split(",").forEach((t=>{if(t){const e=[];t.split("-").forEach((t=>{if(t){const[,n,o]=t.split(/([0-9]+)/);for(let t=0;t<n;t++)e.push("l"===o)}})),n.push(e)}})),n}function i(t){let n=-2;for(let e=0;e<t.length&&!t[e].some((t=>t));e++)n++;return t.filter(((t,e)=>e>=n))}function r(t){return n=>{for(let e=0;e<t;e++)n=[...n,Array.from({length:n[0].length},(()=>!1))];return n}}function c(t,...n){return n.forEach((n=>{t=n(t)})),t}function l(t){return t[0].map(((n,e)=>t.map((t=>t[e]))))}function a(t){return t.map(((n,e)=>t[t.length-1-e]))}function u(t,n){return t.filter(((t,e)=>e<n))}var s=(t={random:function(t,n,o=.25){const i=.8;return e(t,n,((e,r)=>e/n>1-i&&e/n<i&&r/t>1-i&&r/t<i&&Math.random()<o))},create:e,getPopulation:function(t){let n=0;for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)t[e][o]&&n++;return n},encode:function(t){let n="";for(let e=0;e<t.length;e++){let o,i="",r=0;for(let n=0;n<t[e].length;n++){const c=t[e][n];o!==c&&(void 0!==o&&(i+=r+(o?"l":"d")+"-"),o=c,r=0),r++,n===t[e].length-1&&(i+=r+++(o?"l":"d")+"-")}n+=i+","}return n},decode:o,dim:function(t){const n=o(t);return{rows:n.length,cols:n[0].length}},pad:function(t,n,e){return c(t,r(e/2),a,r(e/2),a,l,r(n/2),a,r(n/2),a,l)},trim:function(t){return c(t,i,a,i,a,l,i,a,i,a,l)},sliceBounds:function(t,n,e){return c(t,(t=>u(t,e)),l,(t=>u(t,n)),l)},compose:c,mirror:a,append:r,transpose:l}).random,d=t.create,f=t.getPopulation,h=t.decode,g=t.pad;const m=(()=>{let t;return{render:function(n,e,o){const i=n.getContext("2d");for(let n=0;n<e.length;n++)for(let r=0;r<e[n].length;r++){const c=e[n][r];t&&c===t[n][r]||(i.beginPath(),i.strokeStyle="#bbbbbb",i.fillStyle=c?"#000000":"#ffffff",i.lineWidth=1,i.rect(r*o,n*o,o,o),i.fill(),i.stroke())}t=e},resizeCanvasToDisplaySize:function(t){const n=t.clientWidth,e=t.clientHeight;return(t.width!==n||t.height!==e)&&(t.width=n,t.height=e,!0)},requestAnimationFrame:function(t,n){let e;window.requestAnimationFrame((function o(i){void 0===e&&(e=i),i-e>n()&&(e=i,t()),window.requestAnimationFrame(o)}))}}})();(()=>{const t=document.getElementById("generations-count"),e=document.getElementById("population-count"),o=document.getElementById("start"),i=document.getElementById("clear"),r=document.getElementById("reset"),c=document.getElementById("random"),l=document.getElementById("speed"),a=document.getElementById("speed-value"),u=document.querySelector("canvas"),w={P:q,C:F,R:H,O:z};let p,y,v,E,P,x,L,M,I=!1,C=0,b=!1;function k(t){const n=t(y);void 0!==n&&(y=n,m.render(u,y,p),e.textContent=String(f(y)))}function B(t,n,e){if(t)return Math.ceil(Math.min(window.innerHeight/+e,window.innerWidth/+n));return"lg"===new URL(window.location.href).searchParams.get("size")?Math.max(50,Math.max(window.innerHeight/50,window.innerWidth/50)):20}function W(t){A(Math.pow(t.target.value,2))}function A(t){x=1/t,a.textContent=t.toFixed(2),l.value=Math.pow(t,.5)}function S(t){if(!t.ctrlKey&&!t.metaKey){const n=w[t.key.toUpperCase()];n&&n()}}function q(){U(!I)}function z(){R(),k((()=>v))}function F(){U(!1),R(),k((()=>d(E,P)))}function H(){R(),k((()=>s(E,P)))}function R(){C=0,t.textContent="0"}function U(t){I=t,o.textContent=I?"Pause (P)":"Play (P)"}function D(t){if(1===t.buttons){b=!0,M=I,U(!1);const{col:n,row:e}=O(t);L=!y[e][n],k((t=>X(t,e,n)))}}function K(t){if(b){const{col:n,row:e}=O(t);k((t=>X(t,e,n)))}}function T(t){if(b){const{col:n,row:e}=O(t);k((t=>X(t,e,n))),b=!1,M&&U(!0)}}function O(t){return{col:Math.floor(t.clientX/p),row:Math.floor(t.clientY/p)}}function X(t,n,e){if(t[n][e]===L)return;const o=t.map((t=>[...t]));return o[n][e]=L,o}return{init:function(){o.addEventListener("click",q),i.addEventListener("click",F),r.addEventListener("click",z),c.addEventListener("click",H),l.addEventListener("change",W),document.addEventListener("keydown",S),u.addEventListener("mousedown",D),u.addEventListener("mousemove",K),u.addEventListener("mouseup",T),m.resizeCanvasToDisplaySize(u),function(){const t=new URL(window.location.href);A(+t.searchParams.get("speed")||20)}(),function(){const t=new URL(window.location.href);"false"===t.searchParams.get("random")&&(c.style.display="none");"false"===t.searchParams.get("clear")&&(i.style.display="none");"true"===t.searchParams.get("reset")&&(r.style.display="block")}();const{grid:e,cellWidthInPixels:a}=function(){const t=new URL(window.location.href).searchParams.get("init");if(t){const n=h(t),e=n.length,o=n[0]?n[0].length:0,i=B(!0,o,e),r=Math.ceil((window.innerWidth-i*o)/i),c=Math.ceil((window.innerHeight-i*e)/i);return{grid:g(n,r,c),cellWidthInPixels:i}}{const t=B(!1);return{grid:d(Math.ceil(window.innerWidth/t),Math.ceil(window.innerHeight/t)),cellWidthInPixels:t}}}();p=a,v=e,P=e.length,E=e[0].length,k((()=>e)),m.requestAnimationFrame((()=>{I&&(t.textContent=String(C++),k((t=>n(t))))}),(()=>1e3*x))}}})().init();
//# sourceMappingURL=index.d3c528e7.js.map
